var m=Object.defineProperty;var u=(n,t,e)=>t in n?m(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var o=(n,t,e)=>(u(n,typeof t!="symbol"?t+"":t,e),e);import{d as p,c as f,a as l,o as y,b}from"./vendor.d39e5869.js";const v=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}};v();class g{constructor(t="scene-object",e){o(this,"type");o(this,"image",{});this.type=t,this.image=e}operation(t){const e=JSON.stringify(this.image),s=JSON.stringify(t);console.log(`Flyweight: Displaying shared (${e}) and unique (${s}) state.`)}getType(){return this.type}}class d{constructor(t,e,s,i=20){o(this,"position");o(this,"direction");o(this,"objType");o(this,"speed");this.position=t,this.direction=e,this.objType=s,this.speed=i}changeParticleData({position:t,direction:e,speed:s}){this.position=t!=null?t:this.position,this.direction=e!=null?e:this.direction,this.speed=s!=null?s:this.speed}draw(t,e){e instanceof g&&t.drawImage(e.image,this.position.x,this.position.y)}getType(){return this.objType}}class a{constructor(t=0,e=0){o(this,"x");o(this,"y");this.x=t,this.y=e}static random(t=1){return new a(Math.random()*t,Math.random()*t)}}const h=.2;class _{constructor(t,e,s,i=[]){o(this,"objects",[]);o(this,"movingObjects",[]);o(this,"currentAnimation",0);o(this,"images",{});o(this,"canvas",{});o(this,"ctx",{});this.canvas=t,this.ctx=e,this.images=s;for(const r of i)this.addObjectToScene(r)}addObjectToScene(t){const e=t.getType();if(this.isObjectCached(e)){this.movingObjects.push(t);return}const s=this.getImageByType(e);!s||(this.objects.push(new g(e,s)),this.movingObjects.push(t))}isObjectCached(t){return!!this.getSceneObjectByType(t)}getSceneObjectByType(t){for(const e of this.objects)if(t===e.getType())return e;return!1}getImageByType(t){return this.images[t]}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.save(),this.ctx.scale(h,h);for(const t of this.movingObjects)t.draw(this.ctx,this.getSceneObjectByType(t.getType()));this.ctx.restore()}animateAddingRandomObjects(t){var e;for(let s=0;s<t;s++){const i=new d(a.random(this.canvas.width/h),a.random(this.canvas.width/h),(e=this.objects[Math.floor(Math.random()*this.objects.length)])==null?void 0:e.getType());this.addObjectToScene(i)}}start(){const t=Date.now(),e=s=>{s-t<2e3&&this.currentAnimation&&(this.draw(),this.animateAddingRandomObjects(1),this.currentAnimation=window.requestAnimationFrame(e))};this.currentAnimation=window.requestAnimationFrame(e)}stop(){typeof this.currentAnimation=="number"&&(this.currentAnimation=void 0)}}var j="/assets/Missile_1_Flying_000.1296be13.png",O="/assets/Missile_2_Flying_000.b1f02716.png",w="/assets/Missile_3_Flying_000.c9c39387.png";var S=(n,t)=>{const e=n.__vccOpts||n;for(const[s,i]of t)e[s]=i;return e};const T=p({data(){return{canvas:{},ctx:{},images:{},gameState:{}}},methods:{async loadImages(n){const t={};for(const e of n)t[`${this.getFileName(e)}`]=await this.loadImage(e);return t},loadImage(n){return new Promise((t,e)=>{let s=new Image;s.crossOrigin="Anonymous",s.src=n,s.onload=()=>{t(s)},s.onerror=()=>e(s)})},getFileName(n){const t=n.match("([a-zA-Z0-9\\s_\\\\.\\-\\(\\):])+(.png|.jpeg|.pdf)$"),e=t==null?void 0:t[t.length-1].toString();if(e)return t==null?void 0:t[0].replace(e,"")}},async mounted(){this.canvas=this.$refs.gameScene,this.ctx=this.canvas.getContext("2d");try{const t=[j,O,w];this.images=await this.loadImages(t)}catch(t){console.error(`Not loading assets!
 ${t.src}`)}console.log(this.images),this.gameState=new _(this.canvas,this.ctx,this.images);const n=["Missile_1_Flying_000","Missile_2_Flying_000","Missile_3_Flying_000"];for(const t of n)this.gameState.addObjectToScene(new d(a.random(this.canvas.width),a.random(this.canvas.width),t))}}),A={id:"app"},x={id:"game-scene",ref:"gameScene",width:1024,height:600};function M(n,t,e,s,i,r){return y(),f("div",A,[l("canvas",x,null,512),l("button",{class:"start",onClick:t[0]||(t[0]=c=>n.gameState.start())}," Start Adding Objects "),l("button",{class:"start",onClick:t[1]||(t[1]=c=>n.gameState.stop())}," Stop Animation ")])}var F=S(T,[["render",M]]);b(F).mount("#app");
