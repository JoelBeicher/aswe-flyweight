var p=Object.defineProperty;var u=(i,e,t)=>e in i?p(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var o=(i,e,t)=>(u(i,typeof e!="symbol"?e+"":e,t),t);import{d as f,c as y,a as l,o as _,b}from"./vendor.d39e5869.js";const m={},w=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}};w();class g{constructor(e="scene-object",t){o(this,"type");o(this,"image",{});this.type=e,this.image=t}operation(e){const t=JSON.stringify(this.image),s=JSON.stringify(e);console.log(`Flyweight: Displaying shared (${t}) and unique (${s}) state.`)}getType(){return this.type}}class d{constructor(e,t,s,n=20){o(this,"position");o(this,"direction");o(this,"objType");o(this,"speed");this.position=e,this.direction=t,this.objType=s,this.speed=n}changeParticleData({position:e,direction:t,speed:s}){this.position=e!=null?e:this.position,this.direction=t!=null?t:this.direction,this.speed=s!=null?s:this.speed}draw(e,t){t instanceof g&&e.drawImage(t.image,this.position.x,this.position.y),console.log("Drawing...")}getType(){return this.objType}}class r{constructor(e=0,t=0){o(this,"x");o(this,"y");this.x=e,this.y=t}static random(e=1){return new r(Math.random()*e,Math.random()*e)}}const h=.2;class v{constructor(e,t,s,n=[]){o(this,"objects",[]);o(this,"movingObjects",[]);o(this,"currentAnimation",0);o(this,"images",{});o(this,"canvas",{});o(this,"ctx",{});this.canvas=e,this.ctx=t,this.images=s;for(const a of n)this.addObjectToScene(a)}addObjectToScene(e){const t=e.getType();if(this.isObjectCached(t)){this.movingObjects.push(e);return}const s=this.getImageByType(t);!s||(this.objects.push(new g(t,s)),this.movingObjects.push(e))}isObjectCached(e){return!!this.getSceneObjectByType(e)}getSceneObjectByType(e){for(const t of this.objects)if(e===t.getType())return t;return!1}getImageByType(e){return this.images[e]}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.save(),this.ctx.scale(h,h);for(const e of this.movingObjects)e.draw(this.ctx,this.getSceneObjectByType(e.getType()));this.ctx.restore()}animateAddingRandomObjects(e){var t;for(let s=0;s<e;s++){const n=new d(r.random(this.canvas.width/h),r.random(this.canvas.width/h),(t=this.objects[Math.floor(Math.random()*this.objects.length)])==null?void 0:t.getType());this.addObjectToScene(n)}}start(){const e=Date.now(),t=s=>{s-e<2e3&&(this.draw(),this.animateAddingRandomObjects(1),this.currentAnimation=window.requestAnimationFrame(t))};t(Date.now())}stop(){typeof this.currentAnimation=="number"&&(window.cancelAnimationFrame(this.currentAnimation),this.currentAnimation=void 0)}}var j=(i,e)=>{const t=i.__vccOpts||i;for(const[s,n]of e)t[s]=n;return t};const O=f({data(){return{canvas:{},ctx:{},images:{},gameState:{}}},methods:{async loadImages(i){const e={};for(const t of i)e[`${this.getFileName(t)}`]=await this.loadImage(t);return e},loadImage(i){return new Promise((e,t)=>{let s=new Image;s.crossOrigin="Anonymous",console.log(i),console.log(m.url),console.log("/aswe-flyweight/"),console.log(new URL(i,"/aswe-flyweight/").href),s.src=new URL(i,m.url).href,s.onload=()=>{e(s)},s.onerror=()=>t(s)})},getFileName(i){const e=i.match("([a-zA-Z0-9\\s_\\\\.\\-\\(\\):])+(.png|.jpeg|.pdf)$"),t=e==null?void 0:e[e.length-1].toString();if(t)return e==null?void 0:e[0].replace(t,"")}},async mounted(){this.canvas=this.$refs.gameScene,this.ctx=this.canvas.getContext("2d");try{const e=["./assets/space_shooter/PNG/Sprites/Missile/Missile_1_Flying_000.png","./assets/space_shooter/PNG/Sprites/Missile/Missile_2_Flying_000.png","./assets/space_shooter/PNG/Sprites/Missile/Missile_3_Flying_000.png"];this.images=await this.loadImages(e)}catch(e){console.error(`Not loading assets!
 ${e.src}`)}console.log(this.images),this.gameState=new v(this.canvas,this.ctx,this.images);const i=["Missile_1_Flying_000","Missile_2_Flying_000","Missile_3_Flying_000"];for(const e of i)this.gameState.addObjectToScene(new d(r.random(this.canvas.width),r.random(this.canvas.width),e))}}),S={id:"app"},T={id:"game-scene",ref:"gameScene",width:1024,height:600};function A(i,e,t,s,n,a){return _(),y("div",S,[l("canvas",T,null,512),l("button",{class:"start",onClick:e[0]||(e[0]=c=>i.gameState.start())}," Start Adding Objects "),l("button",{class:"start",onClick:e[1]||(e[1]=c=>i.gameState.stop())}," Stop Animation ")])}var M=j(O,[["render",A]]);b(M).mount("#app");
