var m=Object.defineProperty;var u=(i,t,e)=>t in i?m(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var o=(i,t,e)=>(u(i,typeof t!="symbol"?t+"":t,e),e);import{d as p,c as f,a as g,o as y,b}from"./vendor.d39e5869.js";const v=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=e(n);fetch(n.href,a)}};v();class l{constructor(t="scene-object",e){o(this,"type");o(this,"image",{});this.type=t,this.image=e}operation(t){const e=JSON.stringify(this.image),s=JSON.stringify(t);console.log(`Flyweight: Displaying shared (${e}) and unique (${s}) state.`)}getType(){return this.type}}class d{constructor(t,e,s,n=20){o(this,"position");o(this,"direction");o(this,"objType");o(this,"speed");this.position=t,this.direction=e,this.objType=s,this.speed=n}changeParticleData({position:t,direction:e,speed:s}){this.position=t!=null?t:this.position,this.direction=e!=null?e:this.direction,this.speed=s!=null?s:this.speed}draw(t,e){e instanceof l&&t.drawImage(e.image,this.position.x,this.position.y)}getType(){return this.objType}}class r{constructor(t=0,e=0){o(this,"x");o(this,"y");this.x=t,this.y=e}static random(t=1){return new r(Math.random()*t,Math.random()*t)}}const h=.2;class w{constructor(t,e,s,n=[]){o(this,"objects",[]);o(this,"movingObjects",[]);o(this,"currentAnimation",0);o(this,"images",{});o(this,"canvas",{});o(this,"ctx",{});this.canvas=t,this.ctx=e,this.images=s;for(const a of n)this.addObjectToScene(a)}addObjectToScene(t){const e=t.getType();if(this.isObjectCached(e)){this.movingObjects.push(t);return}const s=this.getImageByType(e);!s||(this.objects.push(new l(e,s)),this.movingObjects.push(t))}isObjectCached(t){return!!this.getSceneObjectByType(t)}getSceneObjectByType(t){for(const e of this.objects)if(t===e.getType())return e;return!1}getImageByType(t){return this.images[t]}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.save(),this.ctx.scale(h,h);for(const t of this.movingObjects)t.draw(this.ctx,this.getSceneObjectByType(t.getType()));this.ctx.restore()}animateAddingRandomObjects(t){var e;for(let s=0;s<t;s++){const n=new d(r.random(this.canvas.width/h),r.random(this.canvas.width/h),(e=this.objects[Math.floor(Math.random()*this.objects.length)])==null?void 0:e.getType());this.addObjectToScene(n)}}start(){const t=Date.now(),e=s=>{s-t<2e3&&this.currentAnimation&&(this.draw(),this.animateAddingRandomObjects(1),this.currentAnimation=window.requestAnimationFrame(e))};this.currentAnimation=window.requestAnimationFrame(e)}stop(){typeof this.currentAnimation=="number"&&(this.currentAnimation=void 0)}}var j="/aswe-flyweight/assets/Missile_1_Flying_000.1296be13.png",O="/aswe-flyweight/assets/Missile_2_Flying_000.b1f02716.png",_="/aswe-flyweight/assets/Missile_3_Flying_000.c9c39387.png";var S=(i,t)=>{const e=i.__vccOpts||i;for(const[s,n]of t)e[s]=n;return e};const T=p({data(){return{canvas:{},ctx:{},images:{},gameState:{}}},methods:{async loadImages(i){const t={};for(const e of i)t[`${this.getFileName(e)}`]=await this.loadImage(e);return t},loadImage(i){return new Promise((t,e)=>{let s=new Image;s.crossOrigin="Anonymous",s.src=i,s.onload=()=>{t(s)},s.onerror=()=>e(s)})},getFileName(i){const t=i.match("([a-zA-Z0-9\\s_\\\\.\\-\\(\\):])+(.png|.jpeg|.pdf)$"),e=t==null?void 0:t[t.length-1].toString();if(e)return t==null?void 0:t[0].replace(e,"")}},async mounted(){this.canvas=this.$refs.gameScene,this.ctx=this.canvas.getContext("2d");try{const i=[j,O,_];this.images=await this.loadImages(i)}catch(i){console.error(`Not loading assets!
 ${i.src}`)}console.log(this.images),this.gameState=new w(this.canvas,this.ctx,this.images);for(const i in this.images)console.log(i),this.gameState.addObjectToScene(new d(r.random(this.canvas.width),r.random(this.canvas.width),i))}}),A={id:"app"},x={id:"game-scene",ref:"gameScene",width:1024,height:600};function $(i,t,e,s,n,a){return y(),f("div",A,[g("canvas",x,null,512),g("button",{class:"start",onClick:t[0]||(t[0]=c=>i.gameState.start())}," Start Adding Objects "),g("button",{class:"start",onClick:t[1]||(t[1]=c=>i.gameState.stop())}," Stop Animation ")])}var M=S(T,[["render",$]]);b(M).mount("#app");
