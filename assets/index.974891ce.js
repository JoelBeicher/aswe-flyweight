var m=Object.defineProperty;var p=(n,e,t)=>e in n?m(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var o=(n,e,t)=>(p(n,typeof e!="symbol"?e+"":e,t),t);import{d as u,c as f,a as l,o as y,b as _}from"./vendor.d39e5869.js";const b=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}};b();class g{constructor(e="scene-object",t){o(this,"type");o(this,"image",{});this.type=e,this.image=t}operation(e){const t=JSON.stringify(this.image),s=JSON.stringify(e);console.log(`Flyweight: Displaying shared (${t}) and unique (${s}) state.`)}getType(){return this.type}}class d{constructor(e,t,s,i=20){o(this,"position");o(this,"direction");o(this,"objType");o(this,"speed");this.position=e,this.direction=t,this.objType=s,this.speed=i}changeParticleData({position:e,direction:t,speed:s}){this.position=e!=null?e:this.position,this.direction=t!=null?t:this.direction,this.speed=s!=null?s:this.speed}draw(e,t){t instanceof g&&e.drawImage(t.image,this.position.x,this.position.y),console.log("Drawing...")}getType(){return this.objType}}class r{constructor(e=0,t=0){o(this,"x");o(this,"y");this.x=e,this.y=t}static random(e=1){return new r(Math.random()*e,Math.random()*e)}}const h=.2;class v{constructor(e,t,s,i=[]){o(this,"objects",[]);o(this,"movingObjects",[]);o(this,"currentAnimation",0);o(this,"images",{});o(this,"canvas",{});o(this,"ctx",{});this.canvas=e,this.ctx=t,this.images=s;for(const a of i)this.addObjectToScene(a)}addObjectToScene(e){const t=e.getType();if(this.isObjectCached(t)){this.movingObjects.push(e);return}const s=this.getImageByType(t);!s||(this.objects.push(new g(t,s)),this.movingObjects.push(e))}isObjectCached(e){return!!this.getSceneObjectByType(e)}getSceneObjectByType(e){for(const t of this.objects)if(e===t.getType())return t;return!1}getImageByType(e){return this.images[e]}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.save(),this.ctx.scale(h,h);for(const e of this.movingObjects)e.draw(this.ctx,this.getSceneObjectByType(e.getType()));this.ctx.restore()}animateAddingRandomObjects(e){var t;for(let s=0;s<e;s++){const i=new d(r.random(this.canvas.width/h),r.random(this.canvas.width/h),(t=this.objects[Math.floor(Math.random()*this.objects.length)])==null?void 0:t.getType());this.addObjectToScene(i)}}start(){const e=Date.now(),t=s=>{s-e<2e3&&(this.draw(),this.animateAddingRandomObjects(1),this.currentAnimation=window.requestAnimationFrame(t))};t(Date.now())}stop(){typeof this.currentAnimation=="number"&&(window.cancelAnimationFrame(this.currentAnimation),this.currentAnimation=void 0)}}var w=(n,e)=>{const t=n.__vccOpts||n;for(const[s,i]of e)t[s]=i;return t};const j=u({data(){return{canvas:{},ctx:{},images:{},gameState:{}}},methods:{async loadImages(n){const e={};for(const t of n)console.log(this.getFileName(t)),e[`${this.getFileName(t)}`]=await this.loadImage(t);return e},loadImage(n){return new Promise((e,t)=>{let s=new Image;s.crossOrigin="Anonymous",s.src=new URL(n,"/aswe-flyweight/").href,s.onload=()=>{e(s)},s.onerror=()=>t(s)})},getFileName(n){const e=n.match("([a-zA-Z0-9\\s_\\\\.\\-\\(\\):])+(.png|.jpeg|.pdf)$"),t=e==null?void 0:e[e.length-1].toString();if(t)return e==null?void 0:e[0].replace(t,"")}},async mounted(){this.canvas=this.$refs.gameScene,this.ctx=this.canvas.getContext("2d");try{const e=["./assets/space_shooter/PNG/Sprites/Missile/Missile_1_Flying_000.png","./assets/space_shooter/PNG/Sprites/Missile/Missile_2_Flying_000.png","./assets/space_shooter/PNG/Sprites/Missile/Missile_3_Flying_000.png"];this.images=await this.loadImages(e)}catch(e){console.error(`Not loading assets!
 ${e.src}`)}console.log(this.images),this.gameState=new v(this.canvas,this.ctx,this.images);const n=["Missile_1_Flying_000","Missile_2_Flying_000","Missile_3_Flying_000"];for(const e of n)this.gameState.addObjectToScene(new d(r.random(this.canvas.width),r.random(this.canvas.width),e))}}),O={id:"app"},S={id:"game-scene",ref:"gameScene",width:1024,height:600};function T(n,e,t,s,i,a){return y(),f("div",O,[l("canvas",S,null,512),l("button",{class:"start",onClick:e[0]||(e[0]=c=>n.gameState.start())}," Start Adding Objects "),l("button",{class:"start",onClick:e[1]||(e[1]=c=>n.gameState.stop())}," Stop Animation ")])}var A=w(j,[["render",T]]);_(A).mount("#app");
